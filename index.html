
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>王仙客的博客</title>
	<meta name="author" content="王仙客">

	
	<meta name="description" content="Oct 10th, 2014 The Python Challenge&#8211;Level 0 引子 最近空余时间，开始学习python，发现一个很有意思的网站：pythonchallenge。目前有33个挑战的级别，打算写一个系列的博客，记录下来学习的过程。那就从零开始吧！ Level 0 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="王仙客的博客" type="application/atom+xml">
	
	<link rel="canonical" href="http://Hydra2050.github.io/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("wh2050@sina.cn") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav"><ul class="main">
	<p style="color:white;font-size:24px">王仙客的博客</p>
	<br>
	<p style="color:white;font-size:18px">明白一些道理</p>
	<p style="color:white;font-size:18px">遇到一些有趣的事</p>
	<br>
	<li><a href="/">博客</a></li>
	<li><a href="/blog/archives">所有文章</a></li>
	<li><a href="/blog/2013/12/04/about/">关于我</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:wh2050@sina.cn" title="Email">Email</a>
		
		
		
		
		
		
		
		
		
		
		
		
		
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-10-10T22:51:40+08:00" data-updated="true" itemprop="datePublished">Oct 10<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/10/10/the-python-challenge-level-0/" itemprop="url">The Python Challenge&#8211;Level 0</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>引子</h2>

<p>最近空余时间，开始学习python，发现一个很有意思的网站：<a href="http://www.pythonchallenge.com/">pythonchallenge</a>。目前有33个挑战的级别，打算写一个系列的博客，记录下来学习的过程。那就从零开始吧！</p>

<h2>Level 0</h2>

<p>Level 0的地址：<a href="http://www.pythonchallenge.com/pc/def/0.html">http://www.pythonchallenge.com/pc/def/0.html</a></p>

<p>一张图片，上面写着2的38次方</p>

<pre><code>Hint: try to change the URL address.
</code></pre>

<p>使用python求2的38次方的值：</p>

<pre><code>import math
print(pow(2,38))
</code></pre>

<p>得到结果：274877906944</p>

<p>根据提示，修改url为：<a href="http://www.pythonchallenge.com/pc/def/274877906944.html">http://www.pythonchallenge.com/pc/def/274877906944.html</a>。</p>

<p>这样就进入下一关了， ^_^)</p>

<p>参考资料：</p>

<p><a href="http://sebug.net/paper/books/dive-into-python3/index.html">深入 Python 3</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-07-26T21:56:07+08:00" data-updated="true" itemprop="datePublished">Jul 26<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/07/26/iosshe-bei-zhua-bao-de-ji-chong-chang-yong-fang-fa/" itemprop="url">在Mac上iOS开发抓包的几种常用方法</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>在iOS开发中，经常需要抓包来查看网络请求、应答的情况，例如坚持服务端应答数据、服务端应答速度、客户端发生请求、流量检测、安全性检测等等。不论代码内如何实现，抓包能够最好的证实一切，往往可以更快地定位问题，解决问题。下面总结几种常用的抓包方法。</p>

<h2>使用charles抓包</h2>

<p>在mac下，<a href="http://www.charlesproxy.com/">charles</a>是一个非常好用的抓取http/https请求的工具。</p>

<p>限制条件：</p>

<ul>
<li>需要mac与iOS设备连接相同的无线网络</li>
<li>只能抓取http/https的数据包</li>
<li>无法抓取2G/3G/4G网络下得数据</li>
</ul>


<p>［注］：更多关于charles的使用方法参照<a href="http://www.charlesproxy.com/documentation/">http://www.charlesproxy.com/documentation/</a></p>

<h2>使用RVI（Remote Virtual Interface）+wireshark抓包</h2>

<p>在iOS5以后，Apple为iOS引入了RVI（Remote Virtual Interface），只要设备通过USB连接到Mac，就可以虚拟出一个远程端口，这样就可以在Mac上使用Wireshark抓取这个远程虚拟端口的数据包了。</p>

<p>限制条件：</p>

<ul>
<li>支持的设备系统iOS5以及之后</li>
</ul>


<h2>使用tcpdump命令抓包</h2>

<p>限制条件：</p>

<ul>
<li>需要iOS设备越狱</li>
</ul>


<h2>小结</h2>

<p>以上是平时常用到得几种抓包方法，各有优缺点，可以根据需要选择最方便的方法。</p>

<h2>参考资料</h2>

<p><a href="http://www.charlesproxy.com/">http://www.charlesproxy.com/</a></p>

<p><a href="http://www.charlesproxy.com/documentation/">http://www.charlesproxy.com/documentation/</a></p>

<p><a href="http://www.wireshark.org/">http://www.wireshark.org/</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-02-16T18:28:08+08:00" data-updated="true" itemprop="datePublished">Feb 16<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/02/16/shi-yong-uimotioneffect/" itemprop="url">使用UIMotionEffect实现设备的倾斜视差</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>iOS7更新后，当倾斜手机的时候，会看到屏幕上的背景图片会随着手机的倾斜度而移动，产生视差。刚开始更新的时候，还以为是自己的错觉，－－！。</p>

<p>UIMotionEffect就像它的名字一样，处理motion effect。UIMotionEffect是一个抽象的基类，子类通过重写<code>keyPathsAndRelativeValuesForViewerOffset:</code>方法，当检测到动作的时候</p>

<p>苹果提供了一个子类UIInterpolatingMotionEffect，通过它我们可以实现对设备水平和竖直方向倾斜。</p>

<pre><code>UIInterpolatingMotionEffect *horizontalMotionEffect = [[UIInterpolatingMotionEffect alloc] initWithKeyPath:@"center.x" type:UIInterpolatingMotionEffectTypeTiltAlongHorizontalAxis];
horizontalMotionEffect.minimumRelativeValue = @(-50);
horizontalMotionEffect.maximumRelativeValue = @(50);
[redView addMotionEffect:horizontalMotionEffect];
</code></pre>

<p><a href="http://www.teehanlax.com/blog/introduction-to-uimotioneffect/">http://www.teehanlax.com/blog/introduction-to-uimotioneffect/</a>
<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIMotionEffect_class/Reference/Reference.html#//apple_ref/doc/uid/TP40013376">https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIMotionEffect_class/Reference/Reference.html#//apple_ref/doc/uid/TP40013376</a>
<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIMotionEffectGroup_class/Reference/Reference.html#//apple_ref/doc/uid/TP40013378">https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIMotionEffectGroup_class/Reference/Reference.html#//apple_ref/doc/uid/TP40013378</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-01-18T22:02:46+08:00" data-updated="true" itemprop="datePublished">Jan 18<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/18/use-nslog-to-print-cgpoint-cgrect/" itemprop="url">如何使用NSLog打印CGPoint、CGSize、CGRect</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>平时调试程序的时候，经常会使用NSLog打印出来。当有CGPoint、CGSize、CGRect对象要打印时，一般要写成下面的方式：</p>

<pre><code>CGPoint point = CGPointMake(0, 20);
NSLog(@"Point: x=%f, y=%f", point.x, point.y);

CGSize size = CGSizeMake(200, 100);
NSLog(@"Size: w=%f, h=%f", size.width, size.height);

CGRect rect = CGRectMake(0, 0, 200, 100);
NSLog(@"Rect: x=%f, y=%f, w=%f, h=%f", rect.origin.x, rect.origin.y, rect.size.width, rect.size.height);
</code></pre>

<p>今天看到一篇文章：<a href="http://iosdevelopertips.com/debugging/how-to-use-nslog-to-debug-cgrect-and-cgpoint.html">How to Use NSLog to Debug CGRect and CGPoint</a>，才了解到有一些其他方便的方法。</p>

<pre><code>CGPoint point = CGPointMake(0, 20);
NSLog(@"Point: %@", NSStringFromCGPoint(point));

CGSize size = CGSizeMake(200, 100);
NSLog(@"Size: %@", NSStringFromCGSize(size));

CGRect rect = CGRectMake(0, 0, 200, 100);
NSLog(@"Rect: %@", NSStringFromCGRect(rect));
</code></pre>

<p>打印结果：</p>

<pre><code>Point: {0, 20}
Size: {200, 100}
Rect: \{\{0, 0\}, \{200, 100\}\}
</code></pre>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-01-18T21:55:51+08:00" data-updated="true" itemprop="datePublished">Jan 18<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/18/ioskai-fa-zhong-%5B%3F%5D-xie-chang-yong-de-hong-ding-yi/" itemprop="url">iOS开发中一些常用的宏定义</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Debug输出：</p>

<pre><code>#ifdef DEBUG
    #define debug(format, ...) CFShow([NSString stringWithFormat:format, ## __VA_ARGS__]);
    #define debugAlert(format, ...)  {UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"%s\n line: %d ", __PRETTY_FUNCTION__, __LINE__] message:[NSString stringWithFormat:format, ##__VA_ARGS__]  delegate:nil cancelButtonTitle:@"Done" otherButtonTitles:nil]; [alert show]; [alert release];}
#else
    #define debug(format, ...) 
    #define debugAlert(format, ...)
#endif
</code></pre>

<p>检测是否支持ARC：</p>

<pre><code>#if __has_feature(objc_arc)
    // ARC
#else
    // No ARC
#endif
</code></pre>

<p><a href="http://iosdevelopertips.com/debugging/remove-debug-code-for-release-build.html">http://iosdevelopertips.com/debugging/remove-debug-code-for-release-build.html</a></p>

<p><a href="http://iosdevelopertips.com/debugging/display-debug-information-in-uialertview.html">http://iosdevelopertips.com/debugging/display-debug-information-in-uialertview.html</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-01-16T22:39:50+08:00" data-updated="true" itemprop="datePublished">Jan 16<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/16/adding-properties-to-a-category-using-associated-objects/" itemprop="url">Adding Properties to a Category Using Associated Objects</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>Object-C中的Category</h2>

<p>Object-C中的Category，相信大家一定不会陌生。一般来说，我们可以用它来为一个类添加新的方法：</p>

<pre><code>@interface NSString (NumberUtils)
- (BOOL)isNumeric; 
@end

@implementation NSString (NumberUtils) 
- (BOOL)isNumeric
{
    NSScanner *scanner = [NSScanner scannerWithString:self];
    return [scanner scanFloat:NULL]? [scanner isAtEnd]: NO;
}
@end
</code></pre>

<p>我们也可以Category中定义新的数据成员，但是不能够对它们使用synthesize。这是因为一个类的结构已经在编译器决定了，而Category是在运行期定义生成的，这样就没有办法改变类结构体中的ivars。</p>

<pre><code>struct objc_class {  
    Class isa  OBJC_ISA_AVAILABILITY;  

    #if !__OBJC2__  
    Class super_class                                        OBJC2_UNAVAILABLE;  
    const charchar *name                                     OBJC2_UNAVAILABLE;  
    long version                                             OBJC2_UNAVAILABLE;  
    long info                                                OBJC2_UNAVAILABLE;  
    long instance_size                                       OBJC2_UNAVAILABLE;  
    struct objc_ivar_list *ivars                             OBJC2_UNAVAILABLE;  
    struct objc_method_list **methodLists                    OBJC2_UNAVAILABLE;  
    struct objc_cache *cache                                 OBJC2_UNAVAILABLE;  
    struct objc_protocol_list *protocols                     OBJC2_UNAVAILABLE;  
#endif  

} OBJC2_UNAVAILABLE;    
</code></pre>

<p>可以向下面这样定义：</p>

<pre><code>@interface NSString (NumberUtils)
@property (nonatomic, readonly, getter=isNumeric) BOOL numeric;
@end
</code></pre>

<p>如果我们想为一个类真正添加一个数据成员，要怎么办呢？当然你可能会想到使用修饰者，封装出一个对象，包含这个类和想要添加的数据成员。但是那样要麻烦一些。</p>

<h2>使用Associated Objects为一个分类添加数据成员</h2>

<p>使用Runtime来解决这个问题。要使用的API：</p>

<pre><code> // 使用一个key值和关联策略来为一个对象设置一个关联的值
void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy);
</code></pre>

<p><code>objc_setAssociatedObject</code>：使用一个key值和关联策略来为一个对象设置一个关联的值。类似NSDictionry，一个key值，对应一个value值。</p>

<p>key值必须是进程的生命周期内一个唯一、不变的id值。可以使用一个NSString对象作为一个key值。但是如果试图通过一个相同的字符串值，但是不同内存地址作为key值，可能不会获得预期的结果。一个更好的选择是定义一个static的指针作为key值。</p>

<p>下面一个例子：</p>

<pre><code>@interface UIImage (Tagged)
@property (nonatomic, copy) NSString *tag;
@end    

#import &lt;objc/runtime.h&gt; 

static const void *ImageTagKey = &amp;ImageTagKey;
@implementation UIImage (Tagged)

- (void)setTag:(NSSting *)tag
{
    objc_setAssociatedObject(self, ImageTagKey, tag, OBJC_ASSOCIATION_COPY_NONATOMIC);
}

- (NSString *)tag
{
    return objc_getAssociatedObject(self, ImageTagKey);
}
@end
</code></pre>

<p>这个例子中有一点点需要主要：</p>

<ul>
<li>key值使用一个指针类型static const void * 。我们必须让这个指针初始化，否则它的值就会为NULL，但是我们不关心具体指向什么，只要它是唯一的，不变的。这里面，指针指向了自己，一个唯一、不变的值。</li>
</ul>


<p>参考文章：</p>

<p><a href="https://developer.apple.com/library/ios/documentation/cocoa/reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/constant_group/Associative_Object_Behaviors">Objective-C Runtime Reference</a></p>

<p><a href="http://iosdevelopertips.com/objective-c/adding-properties-category-using-associated-objects.html">Adding Properties to a Category Using Associated Objects</a></p>

<p><a href="http://nshipster.com/associated-objects/">Associated Objects</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-01-12T22:40:40+08:00" data-updated="true" itemprop="datePublished">Jan 12<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/12/reactivecocoajian-jie/" itemprop="url">ReactiveCocoa简介</a></h1>
	<div class="entry-content" itemprop="articleBody">
		

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-01-12T16:45:59+08:00" data-updated="true" itemprop="datePublished">Jan 12<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/12/2013nian-du-guo-de-hao-shu/" itemprop="url">2013年读过的好书</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>技术类书籍</h2>

<p>首先时技术类书籍：</p>

<ul>
<li>《从小工到专家——程序员修炼之道》：</li>
<li>《Head First 设计模式》：</li>
<li>《iOS 高级编程》：</li>
<li>《Python》：</li>
<li>《STL源码剖析》：</li>
</ul>


<h2>非技术类书籍</h2>

<p>非技术类：</p>

<ul>
<li>《一个人的村庄》：</li>
<li>《1984》：</li>
<li>《少有人走的路：》：</li>
<li>《自由在高处》：</li>
<li>《九种孤独》：</li>
<li>《天才在左，疯子在右》：</li>
<li>《猎命师传奇：卷二十》：</li>
<li>《上帝掷骰子吗》：</li>
<li>《沉默的大多数》：</li>
<li>《变身》、《新参者》：</li>
</ul>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-01-12T13:56:24+08:00" data-updated="true" itemprop="datePublished">Jan 12<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/12/http-cache/" itemprop="url">HTTP的缓存机制</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>前言</h2>

<p>HTTP的缓存机制，主要体现在HTTP协议头里面的几个字段——Expires、Cache-control、Last-Modified/If-Modified-Since、Etag/If-None-Match等。在移动开发中，了解HTTP的缓存对开发者来说已经必不可少。</p>

<p><img src="/images/2014011216.png" alt="HTTP HEAD" /></p>

<h2>Expires</h2>

<p>HTTP头中的Expires字段，告诉浏览器在Expires显示的时间前，浏览器可以从缓存中读取，而不需要再次去请求。</p>

<h2>Cache-control</h2>

<p>Cache-control与Expires一样，都是告诉浏览器有效期。不过它不只是设置过期时间，还可以设置很多选项：</p>

<ul>
<li>no-cache指示请求或响应消息不能缓存</li>
<li>no-store用于防止重要的信息被无意的发布。在请求消息中发送将使得请求和响应消息都不使用缓存。</li>
<li>max-age指示客户机可以接收生存期不大于指定时间（以秒为单位）的响应。</li>
<li>min-fresh指示客户机可以接收响应时间小于当前时间加上指定时间的响应。</li>
<li>max-stale指示客户机可以接收超出超时期间的响应消息。如果指定max-stale消息的值，那么客户机可以接收超出超时期指定值之内的响应消息。</li>
</ul>


<p>如上图：max-age＝600，表示600s内不需要重新请求。</p>

<h2>Last-Modified</h2>

<p><code>Last-Modified</code>：资源的最后修改时间。</p>

<p>如果本地缓存已经过期，即超过了<code>max-age</code>的缓存时间，缓存的HTTP头中存在Last-Modified，则向服务器发送带有If-Modified-Since字段的请求，后面带上<code>Last-Modified</code>所记录的最后修改时间。</p>

<p>服务器收到带有<code>If-Modified-Since</code>的HTTP请求，会将请求的资源修改时间与<code>If-Modified-Since</code>时间对比：如果这段时间没有被修改过，则返回304，告诉浏览器可以继续使用本地缓存；如果资源已经修改过了，则响应请求的资源数据，返回200 OK.</p>

<h2>Etag</h2>

<p><code>Etag</code>：服务器应答数据的时候，生成的当前资源的唯一标识。</p>

<p>如果本地缓存已经过期，即超过了<code>max-age</code>的缓存时间，缓存的HTTP头中存在<code>Etag</code>，则向服务器发送带有<code>If-None-Match</code>字段的请求，后面带上<code>Etag</code>所记录的当前资源的唯一标识。</p>

<p>服务器收到带有<code>If-None-Match</code>的HTTP请求，会将请求的资源唯一标识与<code>If-None-Match</code>的标签的标识对比：如果这段时间没有被修改过，则返回304，告诉浏览器可以继续使用本地缓存；如果资源已经修改过了，则响应请求的资源数据，返回200 OK。</p>

<h2>Etag与Last-Modified的区别？</h2>

<p>HTTP1.1中Etag的出现主要是为了解决几个Last-Modified比较难解决的问题：</p>

<ul>
<li>Last-Modified标注的最后修改只能精确到秒级，如果某些文件在1秒钟以内，被修改多次的话，它将不能准确标注文件的修改时间</li>
<li>如果某些文件会被定期生成，当有时内容并没有任何变化，但Last-Modified却改变了，导致文件没法使用缓存</li>
<li>有可能存在服务器没有准确获取文件修改时间，或者与代理服务器时间不一致等情形</li>
</ul>


<p><code>Etag</code>是服务器生成的对应资源的唯一标识符，能够更加准确的控制缓存。<code>Last-Modified</code>与<code>ETag</code>是可以一起使用的，服务器会优先验证<code>ETag</code>，一致的情况下，才会继续比对<code>Last-Modified</code>。</p>

<h2>跳转、刷新、强制刷新</h2>

<p>浏览器缓存行为还有用户的行为有关:</p>

<table>
<thead>
<tr>
<th>用户操作      </th>
<th align="center"> Expires/Cache-control </th>
<th align="center"> Last-Moified/Etag</th>
</tr>
</thead>
<tbody>
<tr>
<td>地址栏回车     </td>
<td align="center"> 有效                  </td>
<td align="center"> 有效</td>
</tr>
<tr>
<td>页面链接跳转   </td>
<td align="center"> 有效                  </td>
<td align="center"> 有效  </td>
</tr>
<tr>
<td>新开窗口      </td>
<td align="center"> 有效                  </td>
<td align="center"> 有效</td>
</tr>
<tr>
<td>前进、后退     </td>
<td align="center"> 有效                  </td>
<td align="center"> 有效 </td>
</tr>
<tr>
<td>F5刷新        </td>
<td align="center"> 无效                  </td>
<td align="center"> 有效</td>
</tr>
<tr>
<td>Ctrl＋F5刷新  </td>
<td align="center"> 无效                  </td>
<td align="center"> 无效 </td>
</tr>
</tbody>
</table>


<h2>总结</h2>

<p>当本地存在缓存的时候，一次请求的流程：</p>

<p><img src="/images/HTTPCache.png" alt="HTTP Cache" /></p>

<p>参考：<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9">Cache-Control section of RFC 2616</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-12-29T18:56:57+08:00" data-updated="true" itemprop="datePublished">Dec 29<span>th</span>, 2013</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/12/29/object-cgao-ji-bian-cheng-xue-xi-san/" itemprop="url">Object-C高级编程学习笔记(三)</a></h1>
	<div class="entry-content" itemprop="articleBody">
		

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    王仙客


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






		</div>
	</div>
</body>
</html>
